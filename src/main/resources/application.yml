spring:
  datasource:
    url: jdbc:postgresql://localhost:5433/noveldb?TimeZone=UTC
    username: postgres
    password: 123456

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    open-in-view: false

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

  servlet:
    multipart:
      enabled: true
      max-file-size: 5MB
      max-request-size: 5MB

  mail:
    host: ${MAIL_HOST:smtp.resend.com}
    port: ${MAIL_PORT:465}
    username: ${MAIL_USERNAME:resend}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          ssl:
            enable: true
          socketFactory:
            port: 465
            class: javax.net.ssl.SSLSocketFactory
            fallback: false
          connectiontimeout: 3000  # Reduced from 5000ms
          timeout: 3000            # Reduced from 5000ms
          writetimeout: 3000       # Reduced from 5000ms
        debug: false

mail:
  from: ${MAIL_FROM:onboarding@resend.dev}

server:
  port: 8080

# Spring Boot Actuator Configuration
management:
  health:
    mail:
      enabled: false  # Disable mail health check to prevent timeout errors
  endpoint:
    health:
      show-details: when-authorized
      probes:
        enabled: true
  endpoints:
    web:
      exposure:
        include: health,info

# SpringDoc/OpenAPI Configuration
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
  show-actuator: false
  default-produces-media-type: application/json
  default-consumes-media-type: application/json

jwt:
  secret: ${JWT_SECRET:MyVerySecretKeyForJWTTokenGenerationThatIsAtLeast256BitsLongForHS256Algorithm}
  access-token-expiration: 86400000  # 1 day
  refresh-token-expiration: 604800000 # 7 days

logging:
  level:
    com.graduate.novel: DEBUG
    org.springframework.security: DEBUG
    org.springdoc: DEBUG
    org.springframework.web: DEBUG

gemini:
  api:
    key: ${GEMINI_API_KEY}
    base-url: https://generativelanguage.googleapis.com/v1beta
    model:
      text: gemini-2.5-flash
      embedding: text-embedding-004
    timeout: 90000
    max-retries: 3

app:
  url: ${APP_URL:http://localhost:3000}
  featured-stories:
    enabled: true
    max-count: 10
    min-days-since-update: 7
    min-view-count: 100
    min-rating: 3.5
    view-count-weight: 0.4
    rating-weight: 0.3
    recency-weight: 0.3
    cron-expression: "0 0 2 * * *"  # Daily at 2 AM

